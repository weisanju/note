# å˜é‡

## å˜é‡è¯­æ³•

```rust
// è‡ªåŠ¨ç±»å‹æ¨æ–­è¯­æ³•
let x = 5;

//å®Œæ•´è¯­æ³• ,æŒ‡å®šæ•°æ®ç±»å‹
let y: f32 = 3.0; // f32
```



## å˜é‡ä¸å¯å˜æ€§

* åœ¨*Rust* ä¸­ å˜é‡é»˜è®¤æ˜¯ä¸å¯æ”¹å˜çš„ï¼ˆimmutableï¼‰
* ä¸èƒ½å¯¹ä¸å¯å˜å˜é‡ x äºŒæ¬¡èµ‹å€¼
* ä½¿ç”¨ *mut* å£°æ˜å¯å˜å˜é‡ *let mut x = 5;*



## å˜é‡å’Œå¸¸é‡

* å¸¸é‡æ˜¯ç»‘å®šåˆ°ä¸€ä¸ªåç§°çš„ä¸å…è®¸æ”¹å˜çš„å€¼
* å¸¸é‡ä¸å…‰é»˜è®¤ä¸èƒ½å˜ï¼Œå®ƒæ€»æ˜¯ä¸èƒ½å˜ã€‚
* å£°æ˜å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—è€Œä¸æ˜¯ `let`ï¼Œå¹¶ä¸” *å¿…é¡»* æ³¨æ˜å€¼çš„ç±»å‹
* å¸¸é‡åªèƒ½è¢«è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸èƒ½æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œæˆ–ä»»ä½•å…¶ä»–åªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼ã€‚
* example: *const MAX_POINTS: u32 = 100_000;*

## éšè—ï¼ˆShadowingï¼‰

* æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸ä¹‹å‰å˜é‡åŒåçš„æ–°å˜é‡ï¼Œè€Œæ–°å˜é‡ä¼š **éšè—** ä¹‹å‰çš„å˜é‡
* è¿™æ„å‘³ç€ä½¿ç”¨è¿™ä¸ªå˜é‡æ—¶ä¼šçœ‹åˆ°ç¬¬äºŒä¸ªå€¼ã€‚å¯ä»¥ç”¨ç›¸åŒå˜é‡åç§°æ¥éšè—ä¸€ä¸ªå˜é‡ï¼Œä»¥åŠé‡å¤ä½¿ç”¨ `let` å…³é”®å­—æ¥å¤šæ¬¡éšè—ï¼Œ
* éšè—ä½¿æˆ‘ä»¬ä¸å¿…ä½¿ç”¨ä¸åŒçš„åå­—
* example

```rust
fn main() {
    let x = 5;

    let x = x + 1;

    let x = x * 2;

    println!("The value of x is: {}", x);
}
```



# æ•°æ®ç±»å‹

> åœ¨ Rust ä¸­ï¼Œæ¯ä¸€ä¸ªå€¼éƒ½å±äºæŸä¸€ä¸ª **æ•°æ®ç±»å‹**ï¼ˆ*data type*ï¼‰ï¼Œä¸¤ç±»æ•°æ®ç±»å‹å­é›†ï¼šæ ‡é‡ï¼ˆscalarï¼‰å’Œå¤åˆï¼ˆcompoundï¼‰ã€‚

**Rust æ˜¯ é™æ€ç±»å‹ï¼ˆ*statically typed*ï¼‰è¯­è¨€**

ä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚æ ¹æ®å€¼åŠå…¶ä½¿ç”¨æ–¹å¼ï¼Œç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ¨æ–­å‡ºæˆ‘ä»¬æƒ³è¦ç”¨çš„ç±»å‹ã€‚å½“å¤šç§ç±»å‹å‡æœ‰å¯èƒ½æ—¶

å¿…é¡»å¢åŠ ç±»å‹æ³¨è§£ `let guess: u32 = "42".parse().expect("Not a number!");`

## æ ‡é‡ç±»å‹

Rust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼š*æ•´å‹*ã€*æµ®ç‚¹å‹*ã€*å¸ƒå°”ç±»å‹* *å­—ç¬¦ç±»å‹*

### æ•´å‹

| é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ------- | ------- | ------- |
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

`isize` å’Œ `usize` ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ 32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„ã€‚

### æ•´å‹å­—é¢é‡

| æ•°å­—å­—é¢å€¼                    | ä¾‹å­          |
| ----------------------------- | ------------- |
| Decimal (åè¿›åˆ¶)              | `98_222`      |
| Hex (åå…­è¿›åˆ¶)                | `0xff`        |
| Octal (å…«è¿›åˆ¶)                | `0o77`        |
| Binary (äºŒè¿›åˆ¶)               | `0b1111_0000` |
| Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äº`u8`) | `b'A'`        |

Rust æ•°å­—ç±»å‹é»˜è®¤æ˜¯ `i32`ï¼šå®ƒé€šå¸¸æ˜¯æœ€å¿«çš„ï¼Œç”šè‡³åœ¨ 64 ä½ç³»ç»Ÿä¸Šä¹Ÿæ˜¯ã€‚`isize` æˆ– `usize` ä¸»è¦ä½œä¸ºæŸäº›é›†åˆçš„ç´¢å¼•ã€‚

### æ•´å‹æº¢å‡º

æ¯”æ–¹è¯´æœ‰ä¸€ä¸ª `u8` ï¼Œå®ƒå¯ä»¥å­˜æ”¾ä»é›¶åˆ° `255` çš„å€¼ã€‚é‚£ä¹ˆå½“ä½ å°†å…¶ä¿®æ”¹ä¸º `256` æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¿™è¢«ç§°ä¸º â€œæ•´å‹æº¢å‡ºâ€ï¼ˆâ€œinteger overflowâ€ ï¼‰ï¼Œå…³äºè¿™ä¸€è¡Œä¸º Rust æœ‰ä¸€äº›æœ‰è¶£çš„è§„åˆ™ã€‚å½“åœ¨ debug æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust æ£€æŸ¥è¿™ç±»é—®é¢˜å¹¶ä½¿ç¨‹åº *panic*ï¼Œè¿™ä¸ªæœ¯è¯­è¢« Rust ç”¨æ¥è¡¨æ˜ç¨‹åºå› é”™è¯¯è€Œé€€å‡ºã€‚ç¬¬ä¹ç«  [â€œ`panic!` ä¸ä¸å¯æ¢å¤çš„é”™è¯¯â€](https://kaisery.github.io/trpl-zh-cn/ch09-01-unrecoverable-errors-with-panic.html) éƒ¨åˆ†ä¼šè¯¦ç»†ä»‹ç» panicã€‚

åœ¨ release æ„å»ºä¸­ï¼ŒRust ä¸æ£€æµ‹æº¢å‡ºï¼Œç›¸åä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸ºäºŒè¿›åˆ¶è¡¥ç åŒ…è£…ï¼ˆ*twoâ€™s complement wrapping*ï¼‰çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œ`256` å˜æˆ `0`ï¼Œ`257` å˜æˆ `1`ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾èµ–æ•´å‹æº¢å‡ºè¢«è®¤ä¸ºæ˜¯ä¸€ç§é”™è¯¯ï¼Œå³ä¾¿å¯èƒ½å‡ºç°è¿™ç§è¡Œä¸ºã€‚å¦‚æœä½ ç¡®å®éœ€è¦è¿™ç§è¡Œä¸ºï¼Œæ ‡å‡†åº“ä¸­æœ‰ä¸€ä¸ªç±»å‹æ˜¾å¼æä¾›æ­¤åŠŸèƒ½ï¼Œ[`Wrapping`](https://kaisery.github.io/std/num/struct.Wrapping.html)ã€‚

### æµ®ç‚¹

ä¸¤ä¸ªåŸç”Ÿçš„ **æµ®ç‚¹æ•°**ï¼ˆ*floating-point numbers*ï¼‰ç±»å‹ï¼Œå®ƒä»¬æ˜¯å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ `f32` å’Œ `f64`ï¼Œåˆ†åˆ«å  32 ä½å’Œ 64 ä½ã€‚é»˜è®¤ç±»å‹æ˜¯ `f64`ï¼Œå› ä¸ºåœ¨ç°ä»£ CPU ä¸­ï¼Œå®ƒä¸ `f32` é€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ç²¾åº¦æ›´é«˜ã€‚

### å¸ƒå°”ç±»å‹

```
 let f: bool = false; // æ˜¾å¼æŒ‡å®šç±»å‹æ³¨è§£
```

### å­—ç¬¦ç±»å‹

```
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
}
```

Rust çš„ `char` ç±»å‹çš„**å¤§å°ä¸ºå››ä¸ªå­—èŠ‚**(four bytes)ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ª Unicode æ ‡é‡å€¼ï¼ˆUnicode Scalar Valueï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ¯” ASCII è¡¨ç¤ºæ›´å¤šå†…å®¹ã€‚åœ¨ Rust ä¸­ï¼Œæ‹¼éŸ³å­—æ¯ï¼ˆAccented lettersï¼‰ï¼Œä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰å­—ç¬¦ï¼Œemojiï¼ˆç»˜æ–‡å­—ï¼‰ä»¥åŠé›¶é•¿åº¦çš„ç©ºç™½å­—ç¬¦éƒ½æ˜¯æœ‰æ•ˆçš„ `char` å€¼ã€‚Unicode æ ‡é‡å€¼åŒ…å«ä» `U+0000` åˆ° `U+D7FF` å’Œ `U+E000` åˆ° `U+10FFFF` åœ¨å†…çš„å€¼ã€‚

## å¤åˆç±»å‹

>  å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰ã€‚

### å…ƒç»„ç±»å‹

* å…ƒç»„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°ã€‚
* åœ†æ‹¬å·ä¸­çš„é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨æ¥åˆ›å»ºä¸€ä¸ªå…ƒç»„
* å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œè€Œä¸”è¿™äº›ä¸åŒå€¼çš„ç±»å‹ä¹Ÿä¸å¿…æ˜¯ç›¸åŒçš„

**å…ƒç»„è§£æ„å–å€¼**

```rust
let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {}", y);
```

`.` å·å–å€¼

```rust
// ä¹Ÿå¯ä»¥ä½¿ç”¨ç‚¹å·ï¼ˆ.ï¼‰åè·Ÿå€¼çš„ç´¢å¼•æ¥ç›´æ¥è®¿é—®å®ƒä»¬
 let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
```

### æ•°ç»„ç±»å‹

>  æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒ

```rust
let a = [1, 2, 3, 4, 5];
let a: [i32; 5] = [1, 2, 3, 4, 5];
// let a = [elea-value; array-length]
let a = [3; 5];
```



# å‡½æ•°

* `main` å‡½æ•°ï¼Œå®ƒæ˜¯å¾ˆå¤šç¨‹åºçš„å…¥å£ç‚¹
* `fn` å…³é”®å­—ï¼Œå®ƒç”¨æ¥å£°æ˜æ–°å‡½æ•°
* Rust ä»£ç ä¸­çš„å‡½æ•°å’Œå˜é‡åä½¿ç”¨ *snake case* è§„èŒƒé£æ ¼ã€‚åœ¨ snake case ä¸­ï¼Œæ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°å®šä¹‰ç¤ºä¾‹çš„ç¨‹åºï¼š

### å‡½æ•°å‚æ•°

```rust
fn another_function(x: i32, y: i32) {
    println!("The value of x is: {}", x);
    println!("The value of y is: {}", y);
}
```

### åŒ…å«è¯­å¥å’Œè¡¨è¾¾å¼çš„å‡½æ•°ä½“

* è¯­å¥ä¸è¿”å›å€¼

    ```rust
     let x = (let y = 6);
    ```

* è¡¨è¾¾å¼ä¼šè®¡ç®—å‡ºä¸€äº›å€¼  `å¹¶ä¸”ä½ å°†ç¼–å†™çš„å¤§éƒ¨åˆ† Rust ä»£ç æ˜¯ç”±è¡¨è¾¾å¼ç»„æˆçš„`ã€‚

    * è€ƒè™‘ä¸€ä¸ªç®€å•çš„æ•°å­¦è¿ç®—ï¼Œæ¯”å¦‚ `5 + 6`ï¼Œè¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å¹¶è®¡ç®—å‡ºå€¼ `11`ã€‚

    * è¡¨è¾¾å¼å¯ä»¥æ˜¯è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼šåœ¨ç¤ºä¾‹ 3-1 ä¸­ï¼Œè¯­å¥ `let y = 6;` ä¸­çš„ `6` æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒè®¡ç®—å‡ºçš„å€¼æ˜¯ `6`ã€‚

    * å‡½æ•°è°ƒç”¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚

    * å®è°ƒç”¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚

    * æˆ‘ä»¬ç”¨æ¥åˆ›å»ºæ–°ä½œç”¨åŸŸçš„å¤§æ‹¬å·ï¼ˆä»£ç å—ï¼‰ï¼Œ`{}`ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼š

        ```rust
         let y = {
                let x = 3;
                x + 1
            };
        ```

### å‡½æ•°è¿”å›å€¼

```rust
fn five() -> i32 {
    5
}
fn main() {
    let x = five();
    println!("The value of x is: {}", x);
}
```

```rust
//x+1 å› ä¸ºåŠ ä¸Šäº†åˆ†å· ä»è¡¨è¾¾å¼ å˜æˆäº† è¯­å¥
fn plus_one(x: i32) -> i32 {
    x + 1;
}
å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼,åˆ™ ä½¿ç”¨ç©ºå…ƒç»„ () è¿”å›
```

# æ§åˆ¶æµ

## if

> è¡¨è¾¾å¼ **å¿…é¡»** æ˜¯ `bool` å€¼

```
    if number < 5 {
        println!("condition was true");
    } else {
        println!("condition was false");
    }
```

### ifåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼

> `if` å’Œ `else` åˆ†æ”¯çš„å€¼ç±»å‹å¿…é¡»ç›¸åŒ

```rust
let number = if condition {
        5
    } else {
        6
    };

//error_example
  let condition = true;

    let number = if condition {
        5
    } else {
        "six"
    };
```

## å¾ªç¯

### *Loop*

```rust

loop {
        println!("again!");
    }

//å¾ªç¯è¿”å›,loopä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
 let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };


```

### *while*

```rust
 let mut number = 3;

    while number != 0 {
        println!("{}!", number);

        number = number - 1;
    }
```

```rust
  let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index < 5 {
        println!("the value is: {}", a[index]);

        index = index + 1;
    }
```

### Forè¿­ä»£

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a.iter() {
        println!("the value is: {}", element);
    }
}
```

**åè½¬**

```rust
fn main() {
    for number in (1..4).rev() {
        println!("{}!", number);
    }
    println!("LIFTOFF!!!");
}
```

