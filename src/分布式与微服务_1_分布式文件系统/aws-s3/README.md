# 简介

AWS S3 全名是 Simple Storage Service。简便的存储服务

**特色**

1. 提供了统一的接口 REST/SOAP 来统一访问任何数据
2. 对 S3 来说，存在里面的数据就是对象名（键），和数据（值）
3. 不限量，单个文件最高可达 5TB
4. 高速。每个 bucket 下每秒可达 3500 PUT/COPY/POST/DELETE 或 5500 GET/HEAD 请求
5. 具备版本，权限控制能力
6. 具备数据生命周期管理能力



# 基本概念

## Bucket

要存储数据在 S3 里，首先我们要建立一个 Bucket。Bucket 默认是不公开的。

Bucket 有几个特点：

- 命名需全球唯一。每个帐号默认可建 100 个，可申请至最多 1000 个
- 创建者的拥有权不可转让，也不可以从一个 Region 转去别的 Region
- 没有对象存储数量限制

Bucket 就像是电脑里面的某一个顶层分区。所有的对象都必须保存在某一个 bucket 下面。



## Object

Bucket 里面每一个存储的数据就是对象，由对象名（键），和数据（值）组成。



对象的键（Key）可以很长，甚至按照一定前缀格式来指定，从而模拟文件夹的层级结构，比如 `Photo/Family/2020-01-25-new-year/altogether.jpg`。



每一个对象其实还包含一些元信息（Meta-data），包括系统指定的文件类型，创建时间，加密算法等，和用户上传时指定的元信息。**元信息在对象创建后都无法更改**。



我们也可以为对象指定最多 10个标签（Tag），标签的键和值的最大长度是 128 和 256 个字符。这个标签和元信息有什么不同呢？标签是可以修改和新增的。它最大的好处，是可以结合权限控制，生命周期管理，和数据分析等使用。



单个文件上传最大是 5GB。超过的话，需要使用 multipart upload API。最大支持 5TB。



## 一致性特性

1. 没有锁的功能。如果同时（几乎）发起两个更新对象的 PUT 请求，键相同，那么，以到达 S3 时间先后处理更新。
2. 不同对象的更新，没法做到原子操作。
3. 对全新的对象来说，它是 Read-after-Write Consistency 的。也就是写了之后马上读，肯定就是你刚才上传的数据。
4. 如果你要更新数据，那就变成 Eventual Consistency 了。也就是说，更新后马上读，可能是旧的数据，也可能是新的。

这里有一个比较坑的地方是，如果你先调用 GET 请求访问一个不存在的资源，S3 告诉你它不存在。然后你马上上传数据，再调用一个 GET，这时候是有可能拿不回来的。

